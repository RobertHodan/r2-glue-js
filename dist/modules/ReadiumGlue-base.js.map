{"version":3,"file":"ReadiumGlue-base.js","sources":["../../src/lib/receiver.ts"],"sourcesContent":["import { IMessage, IMessageCallback, IMessageEvent } from './common';\n\nexport abstract class Receiver<T> {\n  protected constructor() {\n    window.addEventListener('message', (event: IMessageEvent<T>) => {\n      const message = event.data;\n\n      if (!message.type || !message.args) {\n        return;\n      }\n\n      this.handleMessage(message, (callbackMessage) => {\n        if (!event.source) {\n          return;\n        }\n\n        event.source.postMessage(callbackMessage, event.origin);\n      });\n    });\n  }\n\n  protected abstract handleMessage(\n    message: IMessage<T>,\n    callback: IMessageCallback<T>,\n  ): void;\n}\n"],"names":[],"mappings":";;;;MAGE;UAAA,iBAgBC;UAfC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,KAAuB;cACzD,IAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC;cAE3B,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;kBAClC,OAAO;eACR;cAED,KAAI,CAAC,aAAa,CAAC,OAAO,EAAE,UAAC,eAAe;kBAC1C,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;sBACjB,OAAO;mBACR;kBAED,KAAK,CAAC,MAAM,CAAC,WAAW,CAAC,eAAe,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;eACzD,CAAC,CAAC;WACJ,CAAC,CAAC;OACJ;MAMH,eAAC;EAAD,CAAC;;;;;;;;;;"}